<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Import All Instruments from a REDCap Project • tidyREDCap</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Import All Instruments from a REDCap Project">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidyREDCap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/dropLabels.html">Drop Labels from a Table</a></li>
    <li><a class="dropdown-item" href="../articles/import_instruments.html">Import All Instruments from a REDCap Project</a></li>
    <li><a class="dropdown-item" href="../articles/makeBinaryWord.html">Make Binary Word</a></li>
    <li><a class="dropdown-item" href="../articles/makeChooseAllTable.html">Make a 'Choose All' Table</a></li>
    <li><a class="dropdown-item" href="../articles/makeChooseOneTable.html">Make a 'Choose One' Table</a></li>
    <li><a class="dropdown-item" href="../articles/makeInstrument.html">Make an Instrument</a></li>
    <li><a class="dropdown-item" href="../articles/useAPI.html">Importing from REDCap</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/RaymondBalise/tidyREDCap/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Import All Instruments from a REDCap Project</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/RaymondBalise/tidyREDCap/blob/tidyREDCap_v1.1.3/vignettes/import_instruments.Rmd" class="external-link"><code>vignettes/import_instruments.Rmd</code></a></small>
      <div class="d-none name"><code>import_instruments.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://raymondbalise.github.io/tidyREDCap/">tidyREDCap</a></span><span class="op">)</span></span></code></pre></div>
<style type="text/css">
p.caption {
  text-align: left;
  color: gray;
  font-style: italic;
}
</style>
<div class="section level2">
<h2 id="the-problem">The Problem<a class="anchor" aria-label="anchor" href="#the-problem"></a>
</h2>
Suppose you have a REDCap project with many instruments; some
instruments are administered in some visits but not in others. In that
case, the export from REDCap will have empty cells for the visits in
which the instrument was not used. For example, Figure 1 shows a study
where subjects completed four instruments (Enrollment, NCI, GAD7, and
Hamilton) at baseline. On days 1, 2, and 3, they completed only
Hamilton. At the end of the study, they completed NCI and Hamilton. The
export of the data for this subject will have five records (one for each
visit), and each record will have a cell for every existing instrument.
However, the “NCI” record will only have values for the baseline and
final visit and empty cells for the visits in between. On the other
hand, there will be no empty spaces for the “Hamilton” record as it was
completed in all the visits. It would be good to have a function that
will export all the data from a project and produce one R table for each
instrument. Those tables should remove the blank records.<br><br><img src="dashboard.jpg" alt="REDCap instrument status preview"><p class="caption" id="fig1">
Figure 1
</p>
<p>The same functionality should help deal with instruments that are
potentially given repeatedly. Common examples include asking
participants to fill out a form describing medical conditions for all
their siblings or asking them to fill out a form for each side effect
they experience while using a drug. In these cases, each participant may
have zero or many records. Again, creating a table with all the records
for these “repeated” instruments would be good.<br><br></p>
</div>
<div class="section level2">
<h2 id="the-solution">The Solution<a class="anchor" aria-label="anchor" href="#the-solution"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Do not type your API token directly into your code</span></span>
<span><span class="fu">tidyREDCap</span><span class="fu">::</span><span class="fu"><a href="../reference/import_instruments.html">import_instruments</a></span><span class="op">(</span></span>
<span>  url <span class="op">=</span> <span class="st">"https://redcap.miami.edu/api/"</span>,</span>
<span>  token <span class="op">=</span> <span class="st">"1A2B3CXXYYZZOOMMGOSHNOOOOX1Y2Z3"</span> <span class="co"># This is BAD!</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># A better way to do this is to read the API key saved in your operating system</span></span>
<span><span class="co">#   For instructions on saving your API key, see link below.</span></span>
<span><span class="fu">tidyREDCap</span><span class="fu">::</span><span class="fu"><a href="../reference/import_instruments.html">import_instruments</a></span><span class="op">(</span></span>
<span>  url <span class="op">=</span> <span class="st">"https://redcap.miami.edu/api/"</span>, </span>
<span>  token <span class="op">=</span> <span class="fu">keyring</span><span class="fu">::</span><span class="fu">key_get</span><span class="op">(</span><span class="st">"nacho_anxiety_key"</span><span class="op">)</span>  <span class="co"># This is BETTER!</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>See the <a href="./useAPI.html">Importing from REDCap</a> vignette
for details/information for saving your API key in a secure
location.</p>
<p>The <code><a href="../reference/import_instruments.html">import_instruments()</a></code> function can be given a URL and
token for a REDCap project, like the one created above and it will
return one table for each instrument in a project. By default, the
function will drop all empty records. For example, the above API call is
pulling data from a REDCap project that has four instruments:
Enrollment, the Nacho Craving Index (NCI), the Generalized Anxiety
Disorder Assessment (GAD7), and the Hamilton Anxiety Scale (HAM-A).</p>
<p>After running the above code we get four tables from the REDCap
project.</p>
<p><img src="global.jpg" alt="RStudio Global Environment pane"></p>
<p>Notice that each repeat of the HAM-A is its own record.</p>
<p><img src="hama.jpg" alt="HAM-A data preview using `View()`"></p>
<p>If a person has only done the baseline assessment they will only have
one record.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Raymond Balise, Gabriel Odom, Kyle Grealis, Anna Calderon, Layla Bouzoubaa, Wayne DeFreitas.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
