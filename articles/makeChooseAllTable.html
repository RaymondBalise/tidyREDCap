<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Make a 'Choose All' Table • tidyREDCap</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Make a 'Choose All' Table">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidyREDCap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/dropLabels.html">Drop Labels from a Table</a></li>
    <li><a class="dropdown-item" href="../articles/import_instruments.html">Import All Instruments from a REDCap Project</a></li>
    <li><a class="dropdown-item" href="../articles/makeBinaryWord.html">Make Binary Word</a></li>
    <li><a class="dropdown-item" href="../articles/makeChooseAllTable.html">Make a 'Choose All' Table</a></li>
    <li><a class="dropdown-item" href="../articles/makeChooseOneTable.html">Make a 'Choose One' Table</a></li>
    <li><a class="dropdown-item" href="../articles/makeInstrument.html">Make an Instrument</a></li>
    <li><a class="dropdown-item" href="../articles/useAPI.html">Importing from REDCap</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/RaymondBalise/tidyREDCap/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Make a 'Choose All' Table</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/RaymondBalise/tidyREDCap/blob/master/vignettes/makeChooseAllTable.Rmd" class="external-link"><code>vignettes/makeChooseAllTable.Rmd</code></a></small>
      <div class="d-none name"><code>makeChooseAllTable.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://raymondbalise.github.io/tidyREDCap/">tidyREDCap</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<p></p>
<div class="section level2">
<h2 id="the-problem">The Problem<a class="anchor" aria-label="anchor" href="#the-problem"></a>
</h2>
<p>REDCap exports a “choose all that apply” question into a series of
similarly-named, binary indicator variables (i.e., the variables are
equal to either “checked” or “unchecked”). For example, the following
data represents a sample of responses to the Nacho Craving Index.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"./redcap.rds"</span><span class="op">)</span></span>
<span><span class="va">redcap</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"ingredients___"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ingredients___1 ingredients___2 ingredients___3 ingredients___4</span></span>
<span><span class="co">#&gt; 1         Checked         Checked         Checked         Checked</span></span>
<span><span class="co">#&gt; 2         Checked         Checked       Unchecked         Checked</span></span>
<span><span class="co">#&gt; 3       Unchecked       Unchecked       Unchecked       Unchecked</span></span>
<span><span class="co">#&gt; 4       Unchecked       Unchecked       Unchecked       Unchecked</span></span>
<span><span class="co">#&gt; 5       Unchecked       Unchecked       Unchecked       Unchecked</span></span>
<span><span class="co">#&gt; 6       Unchecked       Unchecked       Unchecked       Unchecked</span></span>
<span><span class="co">#&gt;   ingredients___5 ingredients___6 ingredients___7 ingredients___8</span></span>
<span><span class="co">#&gt; 1         Checked         Checked       Unchecked         Checked</span></span>
<span><span class="co">#&gt; 2         Checked       Unchecked         Checked         Checked</span></span>
<span><span class="co">#&gt; 3       Unchecked       Unchecked       Unchecked       Unchecked</span></span>
<span><span class="co">#&gt; 4       Unchecked       Unchecked       Unchecked       Unchecked</span></span>
<span><span class="co">#&gt; 5       Unchecked       Unchecked       Unchecked       Unchecked</span></span>
<span><span class="co">#&gt; 6       Unchecked       Unchecked       Unchecked       Unchecked</span></span></code></pre></div>
<p>It is desirable to have a concise table showing how often each option
was chosen.</p>
<div class="section level3">
<h3 id="aside-loading-redcap-data-into-r">Aside: Loading REDCap Data into R<a class="anchor" aria-label="anchor" href="#aside-loading-redcap-data-into-r"></a>
</h3>
<p>See the <a href="./import_instruments.html">Import All Instruments
from a REDCap Project</a> and <a href="./useAPI.html">Importing from
REDCap</a> vignettes for details/information.</p>
</div>
</div>
<div class="section level2">
<h2 id="the-solution">The Solution<a class="anchor" aria-label="anchor" href="#the-solution"></a>
</h2>
<div class="section level3">
<h3 id="data-loaded-with-import_instruments">Data Loaded with <code>import_instruments()</code><a class="anchor" aria-label="anchor" href="#data-loaded-with-import_instruments"></a>
</h3>
<p>If you pass the <code><a href="../reference/make_choose_all_table.html">make_choose_all_table()</a></code> function, the
name of a REDCap export, and the name of the <em>choose all that apply
question</em> question in REDCap, it will produce a concise frequency
count table.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/make_choose_all_table.html">make_choose_all_table</a></span><span class="op">(</span><span class="va">redcap</span>, <span class="st">"ingredients"</span><span class="op">)</span> </span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 8 × 2</span></span></span>
<span><span class="co">#&gt;   What          Count</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Chips             9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Yellow cheese     7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Orange cheese     3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> White cheese      4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Meat              5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Beans             7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Tomatoes          6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> Peppers           8</span></span></code></pre></div>
<p>Similar to the <code><a href="../reference/make_choose_one_table.html">make_choose_one_table()</a></code> function, we can
use this function inside an analysis pipeline. We can add the
<code>kable()</code> call to make the table publication quality.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">redcap</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/make_choose_all_table.html">make_choose_all_table</a></span><span class="op">(</span><span class="st">"ingredients"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">What</th>
<th align="right">Count</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Chips</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="left">Yellow cheese</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">Orange cheese</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">White cheese</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">Meat</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">Beans</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">Tomatoes</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">Peppers</td>
<td align="right">8</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="data-exported-with-data-exports-reports-and-stats-in-redcap">Data Exported with “Data Exports, Reports and Stats” in REDCap<a class="anchor" aria-label="anchor" href="#data-exported-with-data-exports-reports-and-stats-in-redcap"></a>
</h3>
<p>If you export data using the point-and-click tools built into REDCap
you end up with two files, one contains R code the other data. When you
run the code you end up with a dataset called <code>data</code> which
contains two copies of some of the information. For example, if you
download the Nacho Craving Index you will see the ingredients variables,
showing what ingredients people are craving, and a second copy of the
variables that have <code>.factor</code> tagged to the end of the names.
The factor versions do not have the variable labels. So you will need to
subset the data to drop them. The example below shows the process. Note
we have copied the <code>data</code> data frame to have a more
meaningful name.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This is the data produced by exporting using point-and-click REDCap export.</span></span>
<span><span class="va">manual_export</span> <span class="op">&lt;-</span> <span class="va">data</span></span>
<span></span>
<span><span class="va">manual_export</span> <span class="op">|&gt;</span>   </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"ingredient"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># get all the ingredient variables</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with</a></span><span class="op">(</span><span class="st">".factor"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span>     <span class="co"># drop the factor version of the ingredient variables</span></span>
<span>  <span class="fu"><a href="../reference/make_choose_all_table.html">make_choose_all_table</a></span><span class="op">(</span><span class="st">"ingredient"</span><span class="op">)</span>  <span class="co"># make the table</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Raymond Balise, Gabriel Odom, Kyle Grealis, Anna Calderon, Layla Bouzoubaa, Wayne DeFreitas.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
