<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Import All Instruments from a REDCap Project • tidyREDCap</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Import All Instruments from a REDCap Project">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidyREDCap</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/dropLabels.html">Drop Labels from a Table</a>
    </li>
    <li>
      <a href="../articles/import_instruments.html">Import All Instruments from a REDCap Project</a>
    </li>
    <li>
      <a href="../articles/makeBinaryWord.html">Make Binary Word</a>
    </li>
    <li>
      <a href="../articles/makeChooseAllTable.html">Make a 'Choose All' Table</a>
    </li>
    <li>
      <a href="../articles/makeChooseOneTable.html">Make a 'Choose One' Table</a>
    </li>
    <li>
      <a href="../articles/makeInstrument.html">Make an Instrument</a>
    </li>
    <li>
      <a href="../articles/useAPI.html">Importing from REDCap</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/RaymondBalise/tidyREDCap/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Import All Instruments from a REDCap
Project</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/RaymondBalise/tidyREDCap/blob/HEAD/vignettes/import_instruments.Rmd" class="external-link"><code>vignettes/import_instruments.Rmd</code></a></small>
      <div class="hidden name"><code>import_instruments.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://raymondbalise.github.io/tidyREDCap/index.html" class="external-link">tidyREDCap</a></span><span class="op">)</span></span></code></pre></div>
<style type="text/css">
p.caption {
  text-align: left;
  color: gray;
  font-style: italic;
}
</style>
<div class="section level2">
<h2 id="the-problem">The Problem<a class="anchor" aria-label="anchor" href="#the-problem"></a>
</h2>
Suppose you have a REDCap project with many instruments; some
instruments are administered in some visits but not in others. In that
case, the export from REDCap will have empty cells for the visits in
which the instrument was not used. For example, Figure 1 shows a study
where subjects completed four instruments (Enrollment, NCI, GAD7, and
Hamilton) at baseline. On days 1, 2, and 3, they completed only
Hamilton. At the end of the study, they completed NCI and Hamilton. The
export of the data for this subject will have five records (one for each
visit), and each record will have a cell for every existing instrument.
However, the “NCI” record will only have values for the baseline and
final visit and empty cells for the visits in between. On the other
hand, there will be no empty spaces for the “Hamilton” record as it was
completed in all the visits. It would be good to have a function that
will export all the data from a project and produce one R table for each
instrument. Those tables should remove the blank records.<br><br><img src="dashboard.jpg" alt="REDCap instrument status preview"><p class="caption" id="fig1">
Figure 1
</p>
<p>The same functionality should help deal with instruments that are
potentially given repeatedly. Common examples include asking
participants to fill out a form describing medical conditions for all
their siblings or asking them to fill out a form for each side effect
they experience while using a drug. In these cases, each participant may
have zero or many records. Again, creating a table with all the records
for these “repeated” instruments would be good.<br><br></p>
</div>
<div class="section level2">
<h2 id="the-solution">The Solution<a class="anchor" aria-label="anchor" href="#the-solution"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Do not type your API token directly into your code</span></span>
<span><span class="fu">tidyREDCap</span><span class="fu">::</span><span class="fu"><a href="../reference/import_instruments.html">import_instruments</a></span><span class="op">(</span></span>
<span>  url <span class="op">=</span> <span class="st">"https://redcap.miami.edu/api/"</span>,</span>
<span>  token <span class="op">=</span> <span class="st">"1A2B3CXXYYZZOOMMGOSHNOOOOX1Y2Z3"</span> <span class="co"># This is BAD!</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># A better way to do this is to read the API key from the .Renviron file.</span></span>
<span><span class="co">#   For instructions on saving your API key, see link below.</span></span>
<span><span class="fu">tidyREDCap</span><span class="fu">::</span><span class="fu"><a href="../reference/import_instruments.html">import_instruments</a></span><span class="op">(</span></span>
<span>  url <span class="op">=</span> <span class="st">"https://redcap.miami.edu/api/"</span>, </span>
<span>  token <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"nacho_anxiety_key"</span><span class="op">)</span>  <span class="co"># This is BETTER!</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>See the <a href="../doc/useAPI.html">Importing from REDCap</a>
vignette for details/information for saving your API key in the
.Renviron file.</p>
<p>The <code><a href="../reference/import_instruments.html">import_instruments()</a></code> function can be given a URL and
token for a REDCap project, like the one created above and it will
return one table for each instrument in a project. By default, the
function will drop all empty records. For example, the above API call is
pulling data from a REDCap project that has four instruments:
Enrollment, the Nacho Craving Index (NCI), the Generalized Anxiety
Disorder Assessment (GAD7), and the Hamilton Anxiety Scale (HAM-A).</p>
<p>After running the above code we get four tables from the REDCap
project.</p>
<div class="float">
<img src="global.jpg" alt="RStudio Global Environment pane"><div class="figcaption">RStudio Global Environment pane</div>
</div>
<p>Notice that each repeat of the HAM-A is its own record.</p>
<div class="float">
<img src="hama.jpg" alt="HAM-A data preview using View()"><div class="figcaption">HAM-A data preview using
<code><a href="https://rdrr.io/r/utils/View.html" class="external-link">View()</a></code>
</div>
</div>
<p>If a person has only done the baseline assessment they will only have
one record.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Raymond Balise, Gabriel Odom, Anna Calderon, Layla Bouzoubaa, Wayne DeFreitas, Kyle Grealis.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
