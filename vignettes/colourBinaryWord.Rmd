---
title: "html2"
author: "name"
date: "`r Sys.Date()`"
output: 
  bookdown::html_document2
---

```{r setup, include=FALSE, message=FALSE}
library(RColorBrewer)
library(tidyverse)
```

# Colour a Binary Word
Let's create a binary word, then split it into a character matrix.
```{r}
x <- c("abc", "a_c", "___", "ab_", "_bc", "___")
A_mat <- do.call(rbind, strsplit(x,""))
nCols <- ncol(A_mat)
```

```{r}

# We only allow up to 26 letters, to 36 colours are sufficient
colnames(A_mat) <- rep(brewer.pal(n = 12, name = "Paired"), 3)[1:nCols]

A1 <- A_mat
for(j in seq_len(nCols)){
  A1[, j] <- if_else(
    A_mat[, j] == "_",
    true = "U+25A1",
    false = paste0(
      '<span style="background-color: ',
      colnames(A_mat)[j],
      '">',
      as.character(A_mat[, j]),
      '</span>'
    )
  )
}
```

Look at the word:
```{r, results="asis"}
# options(width = 10)
A1 %>% 
  as_tibble %>% 
  mutate(end = "\n") %>% 
  unite(word, sep = "") %>% 
  pull(word) %>% 
  cat
```

